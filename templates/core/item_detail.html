{% extends 'core/base.html' %}

{% block title %}{{ item.title }} | Lost & Found{% endblock %}

{% block content %}
<div class="item-detail">
    <a href="{% url 'item_list' %}" class="back-link">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ø—Ä–µ–¥–º–µ—Ç–æ–≤</a>
    
    <div class="detail-card {% if item.found %}found{% else %}lost{% endif %}">
        <h1>{{ item.title }}</h1>
        
        <div class="item-info">
            <p>
                <strong>üìù –û–ø–∏—Å–∞–Ω–∏–µ:</strong> 
                <span style="margin-left: 1rem;">{{ item.description }}</span>
            </p>
            
            <p>
                <strong>üìç –ú–µ—Å—Ç–æ:</strong> 
                <span style="margin-left: 1rem;">{{ item.location|default:"–ù–µ —É–∫–∞–∑–∞–Ω–æ" }}</span>
            </p>
            
            <p>
                <strong>üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</strong> 
                <span style="margin-left: 1rem;">{{ item.contact_info|default:"–ù–µ —É–∫–∞–∑–∞–Ω–æ" }}</span>
            </p>
            
            <p>
                <strong>üÜî ID:</strong> 
                <span style="margin-left: 1rem;">{{ item.id }}</span>
            </p>
            
            <p>
                <strong>üìÖ –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:</strong> 
                <span style="margin-left: 1rem;">{{ item.created_at|date:"d.m.Y H:i" }}</span>
            </p>
            
            <p>
                <strong>üîÑ –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:</strong> 
                <span style="margin-left: 1rem;">{{ item.updated_at|date:"d.m.Y H:i" }}</span>
            </p>
        </div>
        
        <div class="status-display">
            {% if item.found %}
                <div class="big-status found">‚úÖ –ü–†–ï–î–ú–ï–¢ –ù–ê–ô–î–ï–ù</div>
                <p style="font-size: 1.1rem; margin-top: 1rem;">
                    –≠—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç –±—ã–ª –Ω–∞–π–¥–µ–Ω. –ï—Å–ª–∏ —ç—Ç–æ –≤–∞—à–∞ –≤–µ—â—å, —Å–≤—è–∂–∏—Ç–µ—Å—å –ø–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–æ–Ω—Ç–∞–∫—Ç–∞–º!
                </p>
            {% else %}
                <div class="big-status lost">‚ùå –ü–†–ï–î–ú–ï–¢ –ü–û–¢–ï–†–Ø–ù</div>
                <p style="font-size: 1.1rem; margin-top: 1rem;">
                    –≠—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω. –ï—Å–ª–∏ –≤—ã –µ–≥–æ –Ω–∞—à–ª–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º!
                </p>
            {% endif %}
        </div>
        
        <div class="api-links">
            <h3>üîó API —Å—Å—ã–ª–∫–∏ –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞:</h3>
            <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1rem;">
                <a href="{% url 'api-item-detail' item.id %}" class="api-link" target="_blank">
                    üìä JSON –¥–∞–Ω–Ω—ã–µ
                </a>
                <a href="/admin/core/item/{{ item.id }}/change/" class="api-link" target="_blank">
                    ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –∞–¥–º–∏–Ω–∫–µ
                </a>
                <button onclick="copyApiUrl()" class="api-link" style="cursor: pointer;">
                    üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å API URL
                </button>
            </div>
            
            <div style="margin-top: 2rem; background: #f8f9fa; padding: 1rem; border-radius: 8px;">
                <p><strong>–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –≤ Postman:</strong></p>
                <code style="display: block; background: #2c3e50; color: white; padding: 0.8rem; border-radius: 4px; margin-top: 0.5rem; font-family: monospace; font-size: 0.9rem;">
                    GET {{ request.scheme }}://{{ request.get_host }}{% url 'api-item-detail' item.id %}
                </code>
            </div>
        </div>
    </div>
</div>

<script>
function copyApiUrl() {
    const apiUrl = "{{ request.scheme }}://{{ request.get_host }}{% url 'api-item-detail' item.id %}";
    navigator.clipboard.writeText(apiUrl).then(() => {
        alert('API URL —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞:\n' + apiUrl);
    });
}
</script>
{% endblock %}